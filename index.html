<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="script.js"></script>
</head>

<body onload="generate()">
	<div class="toolbar" id="toolbar">
		<div class="color" id="color">
			<button class="userColor" id="userColor"></button>
			<div class="pallete">
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #000000;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #7f7f7f;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #880015;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #ed1c24;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #ff7f27;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #fff200;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #22b14c;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #00a2e8;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="
						background: #03001e;
						background: -webkit-linear-gradient(to right, #fdeff9, #ec38bc, #7303c0, #03001e);
						background: linear-gradient(to right, #fdeff9, #ec38bc, #7303c0, #03001e);"></button>

				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #ffffff;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #c3c3c3;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #b97a57;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #ffaec9;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #ffc90e;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #efe4b0;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #b5e61d;"></button>
				<button class="colorBox" id="palleteColor" onclick = "pickColor(this)" style="background: #99d9ea;"></button>
			</div>
		</div>
		<div class="tools" id="tools">
			<div class="tool pen" onclick="tool_pen()">
				<img src="img/pen.svg">
			</div>
			<div class="tool fill" onclick="tool_fill(userColor.style.background)">
				<img src="img/fill.svg">
			</div>
			<div class="tool dropper" onclick="tool_dropper()">
				<img src="img/dropper.svg">
			</div>
			<div class="tool eraser" onclick="tool_eraser()">
				<img src="img/eraser.svg">
			</div>
			<div class="tool erase_all" onclick="tool_erase_all()">
				<img src="img/erase_all.svg">
			</div>
			<div class="tool download" onclick="tool_download()">
				<img src="img/download.svg">
			</div>
			<div class="tool" id="toolDownload" style="display: none;">
				<a id="hrefDownload" href="" target="_blank" rel="noopener noreferrer" download="мой_шедевр">Скачать</a>
			</div>
		</div>
	</div>
	<div class="playground" id="playground">

	</div>
</body>

<script src="./html2canvas.min.js"></script>
<script>
	// document.body.append(`height ${document.documentElement.clientHeight} width ${document.documentElement.clientWidth}`)
	function tool_download() {
		html2canvas(document.getElementById("playground"), {
			windowWidth: document.documentElement.clientWidth,
			allowTaint: true,
			useCORS: true,
		}).then(function (canvas) {
			let image = canvas.toDataURL("image/png", 0.5);
			toolDownload.style.display='block'
			hrefDownload.setAttribute('href',image)
			console.log(image)
		}).catch((e) => {
			// Handle errors
			console.log(e);
		});
	}
</script>

</html>